-- TABLE PHAN TAN
CREATE TABLE VANPHONG(
    MAVP VARCHAR(20) PRIMARY KEY NOT NULL,
    TENVP NVARCHAR(255) NOT NULL,
    DIACHIVP NVARCHAR(255) NOT NULL,
    SDTVP VARCHAR(20) NOT NULL
)


CREATE TABLE NHANVIEN(
    MANV VARCHAR(20) NOT NULL PRIMARY KEY,
    MAPB VARCHAR(20) NOT NULL,
    MACV VARCHAR(20) NOT NULL,
    HOTEN NVARCHAR(255) NOT NULL,
    NGAYSINH DATE,
    GIOITINH INT,
    CMND VARCHAR(20),
    DIACHI NVARCHAR(255),
    DIENTHOAI VARCHAR(20),
    HOCVAN NVARCHAR(255),
    TRANGTHAI INT NOT NULL,
    EMAIL VARCHAR(255) NOT NULL,
    SOBHYT VARCHAR(20),
    SOBHXH VARCHAR(20),
);


CREATE TABLE USERDATA (
    USERNAME varchar(50)  NOT NULL PRIMARY KEY,
    PASSWORD varchar(255) NOT NULL,
    MANV varchar(50) NOT NULL,
    ROLE int NOT NULL,
    AVATAR IMAGE,
    AVATARURL NVARCHAR(MAX),
)

CREATE TABLE HOPDONG(
    MAHD VARCHAR(20) PRIMARY KEY NOT NULL,
    MANV VARCHAR(20) NOT NULL,
    NGAYKY DATE NOT NULL,
    HANHD DATE NOT NULL,
    TRANGTHAI INT  NOT NULL
);

CREATE TABLE CHUCVU(
    MACV VARCHAR(20) PRIMARY KEY NOT NULL,
    TENCV NVARCHAR(255) NOT NULL
);

CREATE TABLE PHONGBAN(
    MAPB VARCHAR(20) PRIMARY KEY NOT NULL,
    MAVP VARCHAR(20) NOT NULL,
    TENPB NVARCHAR(255) NOT NULL,
    MOTA NVARCHAR(255)
);

CREATE TABLE LUONG(
     MALUONG VARCHAR(20) PRIMARY KEY,
     MANV VARCHAR(20),
     MUCLUONG MONEY,
)

CREATE TABLE CONG(
    MACONG VARCHAR(20) PRIMARY KEY,
    MANV VARCHAR(20),
    MACC VARCHAR(20),
    GIOCONGCHUAN INT,
    GIOCONG INT,
    THANG MONTH,
    NAM YEAR,
)

CREATE TABLE THANHTOANLUONG(
    ID INT IDENTITY PRIMARY KEY,
    MANV VARCHAR(20) NOT NULL,
    MALUONG VARCHAR(20) NOT NULL,
    MACONG VARCHAR(20) NOT NULL,
    THANG MONTH NOT NULL,
    NAM YEAR NOT NULL,
    TAMUNG MONEY DEFAULT 0,
    THUONG MONEY DEFAULT 0,
    KHAUTRU MONEY DEFAULT 0,
    THUCLINH MONEY NOT NULL,
)

CREATE TABLE NGHIVIEC (
    MANGHI VARCHAR(20) PRIMARY KEY ,
    MANV VARCHAR(20) NOT NULL,
    NGAYNGHI DATE NOT NULL,
    NGHIDEN DATE NOT NULL,
    LYDONG NVARCHAR(MAX) NOT NULL,
    HUONGLUONG INT NOT NULL,
)



ALTER TABLE CONG ADD CONSTRAINT FK_CONG_NV FOREIGN  KEY (MANV) REFERENCES NHANVIEN(MANV)

ALTER TABLE HOPDONG ADD CONSTRAINT FK_HD_NV FOREIGN  KEY (MANV) REFERENCES NHANVIEN(MANV)

ALTER TABLE NGHIVIEC ADD CONSTRAINT FK_NGHI_NV FOREIGN  KEY (MANV) REFERENCES NHANVIEN(MANV)

ALTER TABLE NHANVIEN ADD CONSTRAINT FK_NV_CV FOREIGN  KEY (MACV) REFERENCES CHUCVU(MACV)
ALTER TABLE NHANVIEN ADD CONSTRAINT FK_NV_PB FOREIGN  KEY (MAPB) REFERENCES PHONGBAN(MAPB)

ALTER TABLE PHONGBAN ADD CONSTRAINT FK_PB_VP FOREIGN  KEY (MAVP) REFERENCES VANPHONG(MAVP)

ALTER TABLE THANHTOANLUONG ADD CONSTRAINT FK_TTL_NV FOREIGN  KEY (MANV) REFERENCES NHANVIEN(MANV)
ALTER TABLE THANHTOANLUONG ADD CONSTRAINT FK_TTL_LUONG FOREIGN  KEY (MALUONG) REFERENCES LUONG(MALUONG)
ALTER TABLE THANHTOANLUONG ADD CONSTRAINT FK_TTL_CONG FOREIGN  KEY (MACONG) REFERENCES CONG(MACONG)

ALTER TABLE USERDATA ADD CONSTRAINT FK_USER_NV FOREIGN  KEY (MANV) REFERENCES NHANVIEN(MANV)


